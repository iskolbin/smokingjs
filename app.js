!function(){"use strict";var e="undefined"==typeof global?self:global;if("function"!=typeof e.require){var t={},i={},n={},r={}.hasOwnProperty,a=/^\.\.?(\/|$)/,o=function(e,t){for(var i,n=[],r=(a.test(t)?e+"/"+t:t).split("/"),o=0,s=r.length;o<s;o++)i=r[o],".."===i?n.pop():"."!==i&&""!==i&&n.push(i);return n.join("/")},s=function(e){return e.split("/").slice(0,-1).join("/")},u=function(t){return function(i){var n=o(s(t),i);return e.require(n,t)}},l=function(e,t){var n=y&&y.createHot(e),r={id:e,exports:{},hot:n};return i[e]=r,t(r.exports,u(e),r),r.exports},c=function(e){return n[e]?c(n[e]):e},h=function(e,t){return c(o(s(e),t))},d=function(e,n){null==n&&(n="/");var a=c(e);if(r.call(i,a))return i[a].exports;if(r.call(t,a))return l(a,t[a]);throw new Error("Cannot find module '"+e+"' from '"+n+"'")};d.alias=function(e,t){n[t]=e};var f=/\.[^.\/]+$/,p=/\/index(\.[^\/]+)?$/,v=function(e){if(f.test(e)){var t=e.replace(f,"");r.call(n,t)&&n[t].replace(f,"")!==t+"/index"||(n[t]=e)}if(p.test(e)){var i=e.replace(p,"");r.call(n,i)||(n[i]=e)}};d.register=d.define=function(e,n){if(e&&"object"==typeof e)for(var a in e)r.call(e,a)&&d.register(a,e[a]);else t[e]=n,delete i[e],v(e)},d.list=function(){var e=[];for(var i in t)r.call(t,i)&&e.push(i);return e};var y=e._hmr&&new e._hmr(h,d,t,i);d._cache=i,d.hmr=y&&y.wrap,d.brunch=!0,e.require=d}}(),function(){var e;"undefined"==typeof window?this:window;require.register("SmokingApplication.js",function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),s=t("pixi.js"),u=t("howler"),l=640,c=480,h=function(e){function t(){n(this,t);var e=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,l,c));return e.width=l,e.height=c,e.columns=81,e.rows=10,e.blockSize=8,e.tracking=!0,s.loader.add("lungs","lungs.json").add("sounds","sounds.json").add("tilesheet","tilesheet.json").load(function(t,i){var n=i.lungs,r=i.sounds;e.initBlocks(n.data),e.initPad(),e.initBall(),e.initHowler(r),s.ticker.shared.add(function(){return e.update(s.ticker.shared.elapsedMS)})}),e}return a(t,e),o(t,[{key:"initHowler",value:function(e){e.data.src=e.data.urls,this.sound=new u.Howl(e.data)}},{key:"onKeyup",value:function(e){var t=e.keyCode;switch(t){case 39:this.pad.movingRight=!1;break;case 37:this.pad.movingLeft=!1}}},{key:"onKeydown",value:function(e){var t=e.keyCode;switch(t){case 39:this.pad.movingRight=!0;break;case 37:this.pad.movingLeft=!0}}},{key:"createObject",value:function(e,t,i){var n=s.extras.AnimatedSprite.fromImages(e);return n.x=t,n.y=i,this.stage.addChild(n),n}},{key:"initPad",value:function(){this.pad={x:350,y:460,vx:0,vy:0,velocity:100,movingRight:!1,movingLeft:!1,sprite:this.createObject(["cigarette.png"],350,460)}}},{key:"initBall",value:function(){this.ball={x:365,y:440,vx:100,vy:100,sprite:this.createObject(["white_square.png"],365,440)}}},{key:"createBlock",value:function(e){var t=this.columns,i=this.blockSize,n=e%t*i,r=(e/t|0)*i;return{x:n,y:r,hp:2,sprite:this.createObject(["","_damaged1","_damaged2","_damaged3"].map(function(e){return"white_square"+e+".png"}),n,r)}}},{key:"initBlocks",value:function(e){var t=this;this.blocks=e.blocks.map(function(e,i){return 1===e?t.createBlock(i):null}).filter(function(e){return null!==e})}},{key:"run",value:function(){this.active=!0}},{key:"updateBall",value:function(e){var t=this.ball,i=(this.width,this.height,t.vx*e*.001),n=t.vy*e*.001;t.x+i<=0&&t.vx<0||t.x+t.sprite.width+i>=this.width?(this.sound.play("hit"),t.vx=-t.vx,t.x-=i):t.x+=i,t.y+n<=0&&t.vy<0||t.y+t.sprite.height+n>=this.height?(this.sound.play("hit"),t.vy=-t.vy,t.y-=n):t.y+=n,t.sprite.x=0|t.x,t.sprite.y=0|t.y}},{key:"track",value:function(){var e=this.pad,t=this.ball;e.x+e.sprite.width/2>t.x+t.sprite.width/2?(e.movingLeft=!0,e.movingRight=!1):(e.movingLeft=!1,e.movingRight=!0)}},{key:"updatePad",value:function(e){var t=this.pad;this.width,this.height;this.tracking&&this.track(),t.movingLeft&&!t.movingRight?t.vx=-t.velocity:t.movingRight&&!t.movingLeft?t.vx=t.velocity:t.vx=0;var i=t.vx*e*.001,n=t.vy*e*.001;t.x+i>=0&&t.x+t.sprite.width+i<=this.width&&(t.x+=i),t.y+n>=0&&t.y+t.sprite.width+n<=this.width&&(t.y+=n),t.sprite.x=0|t.x,t.sprite.y=0|t.y}},{key:"checkCollision",value:function(e,t,i,n,r,a,o,s){return e<=r+o&&r<=e+i&&t<=a+s&&a<=t+n}},{key:"getCollisionSide",value:function(e,t){var i=e.x,n=e.y,r=e.sprite,a=r.width,o=r.height,s=t.x,u=t.y,l=t.sprite,c=l.width,h=l.height;if(!(i<=s+c&&s<=i+a&&n<=u+h&&u<=n+o))return"NONE";var d=[Math.abs(i-s-c),Math.abs(s-i-a),Math.abs(n-u-h),Math.abs(u-n-o)],f=0;switch(d[1]>d[f]&&(f=1),d[2]>d[f]&&(f=2),d[3]>d[f]&&(f=3),f){case 0:return"LEFT";case 1:return"RIGHT";case 2:return"BOTTOM";case 3:return"TOP"}}},{key:"damageBlock",value:function(e){e.hp-=1,e.sprite.gotoAndStop(this.blocks.length%3+1)}},{key:"flushBlocks",value:function(){var e=this.blocks.filter(function(e){return e.hp<=0});e.length>0&&(this.blocks=this.blocks.filter(function(e){return e.hp>0}),e.forEach(function(e){return e.sprite.destroy()}),this.sound.play("blow"))}},{key:"updateCollisions",value:function(){var e=this.pad,t=this.ball;switch(this.getCollisionSide(e,t)){case"LEFT":case"RIGHT":t.vx=-t.vx,this.sound.play("hit");break;case"BOTTOM":case"TOP":t.vy=-t.vy,this.sound.play("hit")}var i=!0,n=!1,r=void 0;try{for(var a,o=this.blocks[Symbol.iterator]();!(i=(a=o.next()).done);i=!0){var s=a.value;switch(this.getCollisionSide(s,t)){case"LEFT":case"RIGHT":this.damageBlock(s),t.vx=-t.vx,this.sound.play("hit");break;case"BOTTOM":case"TOP":this.damageBlock(s),t.vy=-t.vy,this.sound.play("hit")}}}catch(u){n=!0,r=u}finally{try{!i&&o["return"]&&o["return"]()}finally{if(n)throw r}}this.flushBlocks()}},{key:"update",value:function(e){this.updateBall(e),this.updatePad(e),this.updateCollisions()}}]),t}(s.Application);e["default"]=h}),require.register("initialize.js",function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}var r=t("./SmokingApplication"),a=n(r);document.addEventListener("DOMContentLoaded",function(){var e=new a["default"];document.getElementById("content").appendChild(e.view),window.addEventListener("keydown",function(t){return e.onKeydown(t)}),window.addEventListener("keyup",function(t){return e.onKeyup(t)})})}),require.alias("buffer/index.js","buffer"),require.alias("path-browserify/index.js","path"),require.alias("process/browser.js","process"),require.alias("punycode/punycode.js","punycode"),require.alias("querystring-es3/index.js","querystring"),require.alias("url/url.js","url"),e=require("process"),require.register("___globals___",function(e,t,i){})}(),require("___globals___");